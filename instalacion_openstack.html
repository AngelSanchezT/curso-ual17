---
layout: presentacion
title: Instalación de OpenStack
tema: white
---
<section>
  <h2>Introducción a la instalación de OpenStack</h2>
  <p>
    <a href="http://albertomolina.wordpress.com">Alberto Molina Coballes</a> y
    <a href="http://www.josedomingo.org">José Domingo Muñoz Rodríguez</a>
  </p>
  <p>
    <a href="http://creativecommons.org/licenses/by-sa/3.0/">
      <img src="img/cc_by_sa.png" width="100px" border="0"/></a>
  </p>
  <p><small>Theme by: <a href="http://lab.hakim.se/reveal-js/#/">reveal.js</a></small></p>
</section>

<section>

<section>
  <h3>Preliminares (1) (En todos los nodos)</h3>
  <ul>
    <li>Instalamos el paquete (software-properties-common): comando add-apt-repository</li>
    <li>Instalamos paquete ubuntu-cloud-keyring</li>
    <li>Añadimos repositorio OpenStack Ocata de ubuntu</li>
    <li>Actualizamos los respositorios de paquetes</li>
    <li>Instalamos ntp</li>
  </ul>
</section>
<section>
  <h3>Preliminares (2) (En el controlador)</h3>
  <ul>
    <li>Instalamos mariaDB</li>
    <li>Creamos un usuario y una base de datos por cada uno de los componentes de OpenStack que vamos a instalar (keystone, glance, nova, neutron, ...)</li>
    <li>Instalamos memcached</li>
    <li>Instalamos rabbitmq</li>
    <li>Instalamos el cliente de linea de comandos (OpenStack Client)</li>
  </ul>
</section>
<section>
  <h3>Keystone</h3>
  <ul>
    <li>Instalamos los paquetes: keystone, python-keystone</li>
    <li>Borramos la base de datos sqlite que se crea por defecto</li>
    <li>Copiamos el fichero de configuración: keystone.conf</li>
    <li>Generamos las tablas en la base de datos (db_sync)</li>
    <li>Configuramos el virtualhost de apache2 para que responda las peticiones a la API de keystone</li>
    <li>Inicializamos la generación de keys (fernet)</li>
    <li>Damos de alta al admin</li>
    <li>Creamos los datos de keystone (usuarios, roles, tenants, servicios, endpoints, ...). </li>
    <li>Se crean los ficheros de credenciales en todos los nodos: admin_open.sh, demo_openrc.sh</li>
  </ul>
</section>
<section>
  <h3>Glance</h3>
  <ul>
    <li>Instalamos los paquetes: glance, glance-api, glance-registry, python-glanceclient, glance-common,...</li>
    <li>Borramos la base de datos sqlite</li>
    <li>Configuramos el servicio: glance-api.conf y glance-registry.conf</li>
    <li>Generamos las tablas en la base de datos (db_sync)</li>
    <li>Descargamos una imagen Cirros</li>
  </ul>
</section>
<section>
  <h3>Nova</h3>
  <ul>
    <li>Instalamos los paquetes: nova-api, nova-conductor, nova-consoleauth, nova-scheduler, python-novaclient, nova-consoleproxy, nova-placement-api</li>
    <li>Borramos la base de datos sqlite</li>
    <li>Configuramos el servicio: nova.conf</li>
    <li>Generamos las tablas en la base de datos nova-api (db_sync)</li>
    <li>Creamos las celdas (cell0 y cell1)</li>
    <li>Generamos las tablas en la base de datos nova (db_sync)</li>
    
  </ul>
</section>
    
<section>
  <h3>Nova (en los nodos de computación)</h3>
  <ul>
    <li>Si el nodo de computación tiene soporte de virtualización hardware (nova-compute-kvm), si no (nova-compute-qemu)</li>
    <li>Instalamos python-guestfs, para gestionar y montar las imágenes.</li>
    <li>Borramos la base de datos sqlite</li>
    <li>Configuramos el servicio: nova.conf</li>
    <li>Damos de alta el nodo de computación en la celda</li>

    
  </ul>
</section>
<section>
  <h3>Neutron</h3>
  <ul>
    <li>Instalamos los paquetes: neutron-server, neutron-plugin-ml2, neutron-common, python-neutronclient</li>
    <li>Configuramos el servicio: neutron.conf, ml2_conf.ini</li>
    <li>Generamos las tablas en la base de datos (db_sync)</li>
    <li>Borramos la base de datos sqlite</li>
  </ul>
</section>
<section>
  <h3>Neutron Agents y Plugins (Nodo de Red)</h3>
  <ul>
    <li>Configuración de sysctl (ip_forward, etc.)</li>
    <li>Instalamos los paquetes:neutron-plugin-ml2, neutron-plugin-openvswitch-agent, neutron-metadata-agent, neutron-l3-agent, neutron-dhcp-agent</li>
    <li>Configuramos el servicio y los plugins</li>
    <ul>
      <li>l3</li>
      <li>dhcp</li>
      <li>metadata</li>
      <li>ml2</li>
    </ul>

  </ul>
</section>
<section>
  <h3>Openvswitch (Nodo de Red)</h3>
  <ul>
    <li>Configuración de los bridge: br-ext, br-int</li>
    <li>Conectamos la interfaz externa al br-ext</li>
    <li>Configuramos los parámetros de red de br-ext</li>
    <li>Modificamos el el fichero interface, para que la configuración se inicie de forma automática</li>
  </ul>
</section>

<section>
  <h3>Horizon</h3>
  <ul>
    <li>Instalamos los paquetes: openstack-dashboard</li>
    <li>Configuramos el servicio: local_settings.py</li>
    <li>Activamos los módulos de apache2: wsgi, ssl, rewrite</li>
  </ul>
</section>

<section>
  <h3>Cinder</h3>
  <ul>
    <li>Instalamos los paquetes: cinder-api, cinder-scheduler, python-cinderclient,... </li>
    <li>Borramos la base de datos sqlite</li>
    <li>Configuramos el servicio: cinder.conf</li>
    <li>Generamos las tablas en la base de datos (db_sync)</li>
  </ul>
</section>

<section>
  <h3>Cinder (Nodo de Almacenamiento)</h3>
  <ul>
    <li>Instalamos los paquetes: qemu, cinder-volume, lvm2 </li>
    <li>Configuramos lvm: creamos volúmenes fisicos y grupo de volúmenes</li>
    <li>Configuramos el servicio: cinder.conf</li>

  </ul>
</section>

<section>
  <h3>Para terminar...</h3>
  <ul>
    <li>Subimos alguna imagen</li>
    <li>Configurar la red: red pública, router y red interna de algún proyecto</li>
    <li>Podemos crear algún sabor con características mínimas</li>
    <li>Hacemos las pruebas</li>

  </ul>
</section>
